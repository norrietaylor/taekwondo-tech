<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Taekwondo Robot Builder - Debug</title>
    <style>
        body {
            margin: 20px;
            font-family: Arial, sans-serif;
            background: #2c5f5d;
            color: white;
        }
        
        #debug {
            background: #000;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-family: monospace;
        }
        
        canvas {
            border: 2px solid #1a3d3b;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <h1>ðŸ¥‹ Taekwondo Robot Builder - Debug Mode</h1>
    
    <div id="debug">
        <div id="log">Loading game...</div>
    </div>

    <!-- Phaser.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.70.0/dist/phaser.min.js"></script>
    
    <script>
        const debugLog = document.getElementById('log');
        function log(message) {
            debugLog.innerHTML += '<br>' + message;
            console.log(message);
        }
        
        // Override console.error to capture errors
        const originalError = console.error;
        console.error = function(...args) {
            log('ERROR: ' + args.join(' '));
            originalError.apply(console, args);
        };
        
        // Listen for uncaught errors
        window.addEventListener('error', function(e) {
            log('UNCAUGHT ERROR: ' + e.message + ' at ' + e.filename + ':' + e.lineno);
        });
        
        log('Phaser loaded: ' + !!window.Phaser);
        log('Starting script loading...');
    </script>
    
    <!-- Game Scripts -->
    <script src="js/utils/Controls.js"></script>
    <script>log('Controls.js loaded');</script>
    
    <script src="js/utils/SaveSystem.js"></script>
    <script>log('SaveSystem.js loaded');</script>
    
    <script src="js/entities/Player.js"></script>
    <script>log('Player.js loaded');</script>
    
    <script src="js/entities/Enemy.js"></script>
    <script>log('Enemy.js loaded');</script>
    
    <script src="js/entities/Collectible.js"></script>
    <script>log('Collectible.js loaded');</script>
    
    <script src="js/scenes/MenuScene.js"></script>
    <script>log('MenuScene.js loaded: ' + !!window.MenuScene);</script>
    
    <script src="js/scenes/GameScene.js"></script>
    <script>log('GameScene.js loaded: ' + !!window.GameScene);</script>
    
    <script src="js/scenes/CraftScene.js"></script>
    <script>log('CraftScene.js loaded: ' + !!window.CraftScene);</script>
    
    <script src="js/game.js"></script>
    <script>
        log('game.js loaded');
        log('TaekwondoRobotBuilder class: ' + !!window.TaekwondoRobotBuilder);
        log('All scripts loaded, attempting game initialization...');
        
        setTimeout(() => {
            try {
                log('Creating game instance...');
                const game = new TaekwondoRobotBuilder();
                log('Game instance created successfully');
                game.init();
                log('Game init completed');
            } catch (error) {
                log('ERROR during game initialization: ' + error.message);
                log('Stack trace: ' + error.stack);
            }
        }, 100);
    </script>
</body>
</html>
